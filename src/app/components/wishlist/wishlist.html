<!-- <div class="container mt-4">
  <div class="row row-cols-2 row-cols-md-2 row-cols-lg-2 g-2" *ngIf="favorites.length > 0; else noMovies">
    <div class="col" *ngFor="let movie of favorites">
      <div class="card h-100 w-50 shadow-sm border-0 rounded-4 overflow-hidden position-relative movie-card">
        <img
          class="card-img-top"
          [src]="'https://image.tmdb.org/t/p/w500' + movie.poster_path"
          alt="{{ movie.title }}"
        />
        <div class="position-absolute m-2" style="width: 50px; height: 50px; bottom: 87px; left: 10px">
          <svg viewBox="0 0 36 36" width="50" height="50">
            <path
              d="M18 2.0845
                 a 15.9155 15.9155 0 0 1 0 31.831
                 a 15.9155 15.9155 0 0 1 0 -31.831"
              stroke="#e6e6e6"
              stroke-width="4"
              fill="none"
            />
            <path
              [attr.stroke]="getStrokeColor(movie.vote_average)"
              [attr.stroke-dasharray]="(movie.vote_average / 10 * 100) + ', 100'"
              d="M18 2.0845
                 a 15.9155 15.9155 0 0 1 0 31.831
                 a 15.9155 15.9155 0 0 1 0 -31.831"
              stroke-width="4"
              fill="none"
              stroke-linecap="round"
            />
            <circle cx="18" cy="18" r="15" fill="#14532d" />
            <text
              x="18"
              y="20.5"
              text-anchor="middle"
              fill="#fff"
              font-size="8"
              dominant-baseline="middle"
            >
              {{ movie.vote_average * 10 | number:'1.0-0' }}%
            </text>
          </svg>
        </div>
        <div class="card-body">
          <h6 class="card-title mt-3 fw-bold">{{ movie.title }}</h6>
          <div class="d-flex justify-content-between align-items-center">
            <p class="card-text text-muted small">{{ movie.release_date | date:'MMM dd, yyyy' }}</p>
            <i
              class="fs-5 bi"
              [ngClass]="isFavorite(movie) ? 'bi-heart-fill text-warning' : 'bi-heart'"
              style="cursor: pointer;"
              (click)="toggleFavorite(movie)">
            </i>
          </div>
        </div>
      </div>
    </div>
  </div>
  <ng-template #noMovies>
    <div class="d-flex flex-column align-items-center justify-content-center" style="height: 70vh;">
      <img src="mi.ico" alt="No Movies" style="width: 100px; opacity: 0.5;" />
      <p class="text-muted mt-3">No Movies in watch list</p>
      <button class="btn btn-warning mt-2" routerLink="/home" >Back to home</button>
    </div>
  </ng-template>
</div> -->
<div class="container mt-4">
  <div
    class="row row-cols-1 row-cols-md-2 g-4 justify-content-center"
    *ngIf="favorites.length > 0; else noMovies"
  >
    <div class="col d-flex justify-content-center" *ngFor="let movie of favorites">
      <div class="card flex-row shadow-sm border-0 rounded-4 overflow-hidden movie-card" style="max-width: 650px;">

        <!-- الصورة -->
        <img
          class="img-fluid"
          [src]="'https://image.tmdb.org/t/p/w500' + movie.poster_path"
          alt="{{ movie.title }}"
          style="width: 40%; object-fit: cover;"
        />

        <!-- تفاصيل الفيلم -->
        <div class="card-body d-flex flex-column justify-content-between p-3" style="width: 60%;">

          <!-- العنوان والتاريخ -->
          <div>
            <h5 class="card-title fw-bold mb-1">{{ movie.title }}</h5>
            <p class="card-text text-muted small mb-2">{{ movie.release_date | date:'MMM dd, yyyy' }}</p>
          </div>

          <!-- الريتنج (دائرة) -->
          <div class="d-flex align-items-center mb-3">
            <svg viewBox="0 0 36 36" width="60" height="60" class="me-2">
              <!-- الدائرة الخلفية -->
              <path
                d="M18 2.0845
                   a 15.9155 15.9155 0 0 1 0 31.831
                   a 15.9155 15.9155 0 0 1 0 -31.831"
                stroke="#e6e6e6"
                stroke-width="4"
                fill="none"
              />
              <!-- الدائرة الملونة حسب التقييم -->
              <path
                [attr.stroke]="getStrokeColor(movie.vote_average)"
                [attr.stroke-dasharray]="(movie.vote_average * 10) + ', 100'"
                d="M18 2.0845
                   a 15.9155 15.9155 0 0 1 0 31.831
                   a 15.9155 15.9155 0 0 1 0 -31.831"
                stroke-width="4"
                fill="none"
                stroke-linecap="round"
              />
              <!-- النص داخل الدائرة -->
              <text
                x="18"
                y="20.5"
                text-anchor="middle"
                fill="#333"
                font-size="10"
                font-weight="bold"
                dominant-baseline="middle"
              >
                {{ movie.vote_average * 10 | number:'1.0-0' }}%
              </text>
            </svg>
            <small class="text-muted">({{ movie.vote_count }} votes)</small>
          </div>

          <!-- الوصف -->
          <p class="card-text text-muted small flex-grow-1">
            {{ movie.overview | slice:0:120 }}...
          </p>

          <!-- الأيقونة -->
          <div class="d-flex justify-content-end align-items-center pt-2 border-top">
            <i
              class="fs-5 bi"
              [ngClass]="isFavorite(movie) ? 'bi-heart-fill text-warning' : 'bi-heart'"
              style="cursor: pointer;"
              (click)="toggleFavorite(movie)">
            </i>
          </div>

        </div>
      </div>
    </div>
  </div>

  <!-- لو مفيش أفلام -->
  <ng-template #noMovies>
    <div class="d-flex flex-column align-items-center justify-content-center" style="height: 70vh;">
      <img src="mi.ico" alt="No Movies" style="width: 100px; opacity: 0.5;" />
      <p class="text-muted mt-3">No Movies in watch list</p>
      <button routerLink="/home" class="btn btn-warning mt-2" routerLink="/home">Back to home</button>
    </div>
  </ng-template>
</div>



